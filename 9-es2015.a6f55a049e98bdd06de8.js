(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{bD6a:function(e,t,n){"use strict";n.r(t),n.d(t,"CheckOutModule",(function(){return L}));var c=n("ofXK"),o=n("tyNb"),r=n("quSY"),a=n("2Vo4"),s=n("pLZG"),i=n("vkgz"),b=n("eIep"),u=n("fXoL"),l=n("4jVr"),d=n("y9W9"),p=n("sYmb"),m=n("kmnG"),h=n("d3UM"),f=n("FKr1"),v=n("IyRd");const g=["scanner"];function P(e,t){if(1&e&&(u.Qb(0,"mat-option",8),u.qc(1),u.Pb()),2&e){const e=t.$implicit;u.fc("value",e.deviceId),u.zb(1),u.sc(" ",e.label," ")}}const y=function(){return["QR_CODE"]};let Q=(()=>{class e{constructor(e,t){this._operations=e,this._err=t,this._subs=new r.a,this.scanned$$=new a.a(!1),this.scannerEnabled=!0,this.currentDevice=null}ngOnInit(){this._subs.add(this.scanned$$.asObservable().pipe(Object(s.a)(e=>!!e),Object(s.a)(()=>this.scannerEnabled),Object(i.a)(()=>{this.scannerEnabled=!1}),Object(s.a)(e=>e.hasOwnProperty("id")&&e.hasOwnProperty("pc")),Object(b.a)(({id:e,pc:t})=>this._operations.checkOut$(e,t)),Object(i.a)(()=>{this.scannerEnabled=!0}),Object(s.a)(e=>!!e)).subscribe())}ngOnDestroy(){this._subs.unsubscribe()}onCamerasFound(e){console.log("camera found"),this.availableDevices=e,this.hasDevices=Boolean(e&&e.length);for(const t of e)if(/back|rear|environment/gi.test(t.label)){this.currentDevice=t;break}this.hasDevices&&!this.currentDevice&&(this.currentDevice=e[0])}onCamerasNotFound(){console.log("camera not found"),this.hasDevices=!1}onHasPermission(e){console.log("has permissions"),this.hasPermission=e}handleQrCodeResult(e){this.scanned$$.next(this._operations.parseCode(e))}scanError(){console.log("error")}onDeviceSelectChange(e){const t=this.availableDevices.find(t=>t.deviceId===e);this.currentDevice=t||null}}return e.\u0275fac=function(t){return new(t||e)(u.Lb(l.a),u.Lb(d.a))},e.\u0275cmp=u.Fb({type:e,selectors:[["app-check-out"]],viewQuery:function(e,t){var n;1&e&&u.vc(g,!0),2&e&&u.hc(n=u.Zb())&&(t.scanner=n.first)},decls:10,vars:7,consts:[[3,"translate"],[1,"device-select-field"],[3,"value","selectionChange"],[3,"value","translate"],["class","mat-option",3,"value",4,"ngFor","ngForOf"],[1,"scanner"],[3,"device","formats","tryHarder","scanSuccess","scanError","camerasFound","camerasNotFound","permissionResponse"],["scanner",""],[1,"mat-option",3,"value"]],template:function(e,t){1&e&&(u.Qb(0,"h3",0),u.qc(1,"Scan QR code"),u.Pb(),u.Qb(2,"mat-form-field",1),u.Qb(3,"mat-select",2),u.Yb("selectionChange",(function(e){return t.onDeviceSelectChange(e.value)})),u.Qb(4,"mat-option",3),u.qc(5,"No device selected"),u.Pb(),u.pc(6,P,2,2,"mat-option",4),u.Pb(),u.Pb(),u.Qb(7,"div",5),u.Qb(8,"zxing-scanner",6,7),u.Yb("scanSuccess",(function(e){return t.handleQrCodeResult(e)}))("scanError",(function(){return t.scanError()}))("camerasFound",(function(e){return t.onCamerasFound(e)}))("camerasNotFound",(function(){return t.onCamerasNotFound()}))("permissionResponse",(function(e){return t.onHasPermission(e)})),u.Pb(),u.Pb()),2&e&&(u.zb(3),u.fc("value",null!=t.currentDevice&&t.currentDevice.deviceId?t.currentDevice.deviceId:""),u.zb(1),u.fc("value",""),u.zb(2),u.fc("ngForOf",t.availableDevices),u.zb(2),u.fc("device",t.currentDevice)("formats",u.gc(6,y))("tryHarder",!0))},directives:[p.a,m.c,h.a,f.h,c.i,v.a],styles:["h3[_ngcontent-%COMP%]{color:grey}mat-divider[_ngcontent-%COMP%]{background-color:#03a9f4}div.scanner[_ngcontent-%COMP%]{padding:24px;margin-top:36px}[_nghost-%COMP%]   zxing-scanner[_ngcontent-%COMP%] {width:100%;height:100%;-o-object-fit:contain;object-fit:contain}a[_ngcontent-%COMP%]{margin:0 auto;display:block;padding-top:36px;font-weight:400;color:grey!important;text-decoration:underline;text-transform:capitalize}"],changeDetection:0}),e})();var O=n("XiUz"),C=n("NFeN"),k=n("bTqV");let D=(()=>{class e{constructor(e){this._operations=e}ngOnInit(){}get visitors(){return this._operations.getVisitors()}}return e.\u0275fac=function(t){return new(t||e)(u.Lb(l.a))},e.\u0275cmp=u.Fb({type:e,selectors:[["app-check-out-success"]],decls:11,vars:1,consts:[["fxLayout","column","fxLayoutAlign","center center"],[3,"translate"],["color","accent",1,"symbol"],["mat-raised-button","","color","accent","routerLink","/in-out/check-out"]],template:function(e,t){1&e&&(u.Qb(0,"div",0),u.Qb(1,"h1",1),u.qc(2,"Check-out successful"),u.Pb(),u.Qb(3,"mat-icon",2),u.qc(4,"check"),u.Pb(),u.Qb(5,"p"),u.Qb(6,"span",1),u.qc(7,"Number of guests currently checked-in"),u.Pb(),u.qc(8),u.Pb(),u.Qb(9,"button",3),u.qc(10,"Ok"),u.Pb(),u.Pb()),2&e&&(u.zb(8),u.sc("[",t.visitors,"] "))},directives:[O.c,O.b,p.a,C.a,k.b,o.b],styles:[""]}),e})();var w=n("/t3+"),F=n("f0Cb"),_=n("STbY");const M=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Fb({type:e,selectors:[["app-layout"]],decls:20,vars:1,consts:[["color","accent"],["mat-icon-button","","routerLink","/in-out"],["vertical","","inset",""],["fxFlex","","fxLayout","row","fxLayoutAlign","start center","routerLink","/"],[3,"translate"],[1,"spacer"],["mat-icon-button","",3,"matMenuTriggerFor"],["extraMenu","matMenu"],["mat-menu-item",""],[1,"content"]],template:function(e,t){if(1&e&&(u.Qb(0,"mat-toolbar",0),u.Qb(1,"mat-toolbar-row"),u.Qb(2,"button",1),u.Qb(3,"mat-icon"),u.qc(4,"keyboard_backspace"),u.Pb(),u.Pb(),u.Mb(5,"mat-divider",2),u.Qb(6,"a",3),u.Qb(7,"h1",4),u.qc(8,"Check-out"),u.Pb(),u.Pb(),u.Mb(9,"span",5),u.Qb(10,"span"),u.Qb(11,"button",6),u.Qb(12,"mat-icon"),u.qc(13,"more_vert"),u.Pb(),u.Pb(),u.Pb(),u.Qb(14,"mat-menu",null,7),u.Qb(16,"button",8),u.qc(17,"Logout"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(18,"div",9),u.Mb(19,"router-outlet"),u.Pb()),2&e){const e=u.ic(15);u.zb(11),u.fc("matMenuTriggerFor",e)}},directives:[w.a,w.c,k.b,o.b,C.a,F.a,o.c,O.a,O.c,O.b,p.a,_.c,_.d,_.a,o.e],styles:[".mat-icon[_ngcontent-%COMP%]{color:#fff}"]}),e})(),children:[{path:"",component:Q},{path:"success",component:D}]}];let x=(()=>{class e{}return e.\u0275mod=u.Jb({type:e}),e.\u0275inj=u.Ib({factory:function(t){return new(t||e)},imports:[[o.d.forChild(M)],o.d]}),e})();var q=n("PCNd");let L=(()=>{class e{}return e.\u0275mod=u.Jb({type:e}),e.\u0275inj=u.Ib({factory:function(t){return new(t||e)},imports:[[c.b,x,v.b,F.b,q.a]]}),e})()}}]);