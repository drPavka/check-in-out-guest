(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{0:function(t,e,r){t.exports=r("zUnb")},AytR:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));const n="https://idme.ch/",o={production:!0,backend:{host:n,prefix:"checkinout/api/",auth_prefix:"api/",base:n+"checkinout/api/"}}},PCNd:function(t,e,r){"use strict";r.d(e,"a",(function(){return m}));var n=r("ofXK"),o=r("/t3+"),a=r("STbY"),s=r("NFeN"),i=r("bTqV"),c=r("YUcS"),u=r("3Pt+"),b=r("kmnG"),l=r("qFsG"),h=r("tk/3"),d=r("sYmb"),p=r("d3UM"),f=r("fXoL");let m=(()=>{class t{}return t.\u0275mod=f.Jb({type:t}),t.\u0275inj=f.Ib({factory:function(e){return new(e||t)},imports:[[n.b,o.b,a.b,s.b,i.c,c.a,u.l,b.e,l.b,h.c,d.c,p.b],n.b,o.b,a.b,s.b,i.c,c.a,u.l,b.e,l.b,h.c,d.c,p.b]}),t})()},TAFP:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("z6cu"),o=r("AytR"),a=r("JIr8"),s=r("fXoL");let i=(()=>{class t{constructor(){}intercept(t,e){if(!t.url.match("json")){const e=(("authenticate"===t.url?o.a.backend.host+o.a.backend.auth_prefix:o.a.backend.base)+"/"+t.url).split("/").filter(t=>!!t).join("/").replace(/(https?:)\//,"$1//");t=t.clone({url:e})}return e.handle(t).pipe(Object(a.a)(t=>{const e=t.error.hasOwnProperty("detail")?t.error.detail:t.error.hasOwnProperty("message")?t.error.message:t.message;return Object(n.a)(new Error(e))}))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Hb({token:t,factory:t.\u0275fac}),t})()},khYj:function(t,e,r){"use strict";r.d(e,"b",(function(){return h})),r.d(e,"a",(function(){return d}));var n=r("fXoL"),o=r("LRne"),a=r("Cfvw"),s=r("vkgz"),i=r("eIep"),c=r("JIr8"),u=r("tk/3"),b=r("y9W9"),l=r("tyNb");const h=new n.q("local_storage");let d=(()=>{class t{constructor(t,e,r,n){this._http=t,this._storage=e,this._err=r,this._router=n}get isLoggedIn$(){return Object(o.a)(this._storage.has("authorization"))}get token(){return this._storage.has("authorization")?this._storage.get("authorization"):null}get user(){return this._storage.has("user")?this._storage.get("user"):null}get club(){return this._storage.has("club")?this._storage.get("club"):null}authorize$(t){return this._http.post("authenticate",t).pipe(Object(s.a)(this._saveTokenData.bind(this)),Object(i.a)(t=>this._http.get("user/"+t.userId,{headers:{Authorization:"Bearer "+t.id_token}}).pipe(Object(s.a)(this._saveUserData.bind(this)),Object(i.a)(e=>this._http.get("club/"+e.clubId,{headers:{Authorization:"Bearer "+t.id_token}})),Object(s.a)(this._saveClubData.bind(this)))),Object(c.a)(t=>(this._err.handleError(t),Object(o.a)(t))))}logOut$(){return this._storage.remove("authorization"),this._storage.remove("user"),this._storage.remove("club"),Object(a.a)(this._router.navigate(["/"]))}_saveTokenData(t){const{id_token:e}=t;this._storage.set("authorization",e)}_saveUserData(t){this._storage.set("user",t)}_saveClubData(t){this._storage.set("club",t)}}return t.\u0275fac=function(e){return new(e||t)(n.Ub(u.b),n.Ub(h),n.Ub(b.a),n.Ub(l.a))},t.\u0275prov=n.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},y9W9:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("fXoL"),o=r("dNgK"),a=r("sYmb");let s=(()=>{class t{constructor(t,e,r){this._snack=t,this._zone=e,this._translate=r}handleError(t){console.error(t),this._zone.run(()=>{this._snackBar=this._snack.open(this._translate.instant(t.message),this._translate.instant("close"),{data:t,panelClass:"error",duration:5e3})})}}return t.\u0275fac=function(e){return new(e||t)(n.Ub(o.a),n.Ub(n.z),n.Ub(a.e))},t.\u0275prov=n.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},zUnb:function(t,e,r){"use strict";r.r(e);var n=r("fXoL"),o=r("AytR"),a=r("jhN1"),s=r("tyNb");let i=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Fb({type:t,selectors:[["app-layout"]],decls:3,vars:0,consts:[[1,"mobile-center"],[1,"card"]],template:function(t,e){1&t&&(n.Qb(0,"div",0),n.Qb(1,"main",1),n.Mb(2,"router-outlet"),n.Pb(),n.Pb())},directives:[s.e],styles:["[_nghost-%COMP%]{flex-direction:column;flex:1;height:100%}[_nghost-%COMP%], main[_ngcontent-%COMP%]{display:flex}.mobile-center[_ngcontent-%COMP%], main[_ngcontent-%COMP%]{flex-direction:column}.mobile-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%}@media (min-width:600px){.mobile-center[_ngcontent-%COMP%]{height:100vh}}a[_ngcontent-%COMP%]{text-decoration:none}"],changeDetection:0}),t})();var c=r("/t3+"),u=r("XiUz"),b=r("sYmb"),l=r("NFeN"),h=r("bTqV");let d=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Fb({type:t,selectors:[["app-error"]],decls:14,vars:0,consts:[["color","warn"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center","routerLink","/"],[1,"content"],["fxLayout","column","fxLayoutAlign","center center"],[3,"translate"],["color","warn",1,"symbol"],["mat-raised-button","","color","warn","routerLink","/"]],template:function(t,e){1&t&&(n.Qb(0,"mat-toolbar",0),n.Qb(1,"mat-toolbar-row"),n.Qb(2,"a",1),n.Qb(3,"h1"),n.qc(4,"Check In Out - Error"),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Qb(5,"div",2),n.Qb(6,"div",3),n.Qb(7,"h3",4),n.qc(8,"Page Not Found"),n.Pb(),n.Qb(9,"mat-icon",5),n.qc(10,"cancel"),n.Pb(),n.Mb(11,"p"),n.Qb(12,"button",6),n.qc(13,"Ok"),n.Pb(),n.Pb(),n.Pb())},directives:[c.a,c.c,s.c,u.a,u.c,u.b,b.a,l.a,h.b,s.b],styles:[""]}),t})();var p=r("XNiG"),f=r("quSY"),m=r("Cfvw"),g=r("3Pt+"),_=r("pLZG"),v=r("lJxs"),P=r("eIep"),y=r("tk/3"),w=r("khYj"),O=r("kmnG"),k=r("qFsG"),x=r("ofXK");function j(t,e){1&t&&(n.Qb(0,"mat-error",5),n.qc(1,"Login required "),n.Pb())}function L(t,e){1&t&&(n.Qb(0,"mat-error",5),n.qc(1,"Password required "),n.Pb())}let Q=(()=>{class t{constructor(t,e){this._auth=t,this._router=e,this.submit$$=new p.a,this._subs=new f.a}ngOnInit(){this.form=new g.d({username:new g.b("",[g.n.required]),password:new g.b("",[g.n.required])}),this._subs.add(this.submit$$.asObservable().pipe(Object(_.a)(()=>this.form.valid),Object(v.a)(()=>Object.assign({},this.form.value,{rememberMe:!1})),Object(P.a)(this._auth.authorize$.bind(this._auth)),Object(_.a)(t=>!(t instanceof Error||t instanceof y.d)),Object(P.a)(()=>Object(m.a)(this._router.navigate(["in-out"])))).subscribe())}ngOnDestroy(){this._subs.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(w.a),n.Lb(s.a))},t.\u0275cmp=n.Fb({type:t,selectors:[["app-login"]],decls:27,vars:7,consts:[[2,"background-color","gray"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center","routerLink","/"],[1,"content"],[1,"main-content",3,"formGroup","ngSubmit"],["fxLayout","column",1,"central-content"],[3,"translate"],["autofocus","","formControlName","username","matInput","","required","","type","text"],[3,"translate",4,"ngIf"],["formControlName","password","matInput","","required","","type","password"],["fxLayoutAlign","center center","fxLayout","column",1,"top-margin"],["color","primary","mat-raised-button","","type","submit",3,"disabled"],["mat-button","",1,"restore-password"]],template:function(t,e){1&t&&(n.Qb(0,"mat-toolbar",0),n.Qb(1,"mat-toolbar-row"),n.Qb(2,"a",1),n.Qb(3,"h1"),n.qc(4),n.bc(5,"translate"),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Qb(6,"div",2),n.Qb(7,"form",3),n.Yb("ngSubmit",(function(){return e.submit$$.next()})),n.Qb(8,"section",4),n.Qb(9,"div"),n.Qb(10,"mat-form-field"),n.Qb(11,"mat-label",5),n.qc(12,"Username"),n.Pb(),n.Mb(13,"input",6),n.pc(14,j,2,0,"mat-error",7),n.Pb(),n.Qb(15,"mat-form-field"),n.Qb(16,"mat-label",5),n.qc(17,"Password"),n.Pb(),n.Mb(18,"input",8),n.pc(19,L,2,0,"mat-error",7),n.Pb(),n.Pb(),n.Qb(20,"div",9),n.Qb(21,"button",10),n.Qb(22,"span",5),n.qc(23,"Login"),n.Pb(),n.Pb(),n.Qb(24,"a",11),n.Qb(25,"span",5),n.qc(26,"Do not remember the password?"),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Pb()),2&t&&(n.zb(4),n.rc(n.cc(5,5,"Login page")),n.zb(3),n.fc("formGroup",e.form),n.zb(7),n.fc("ngIf",e.form.controls.username.hasError("required")),n.zb(5),n.fc("ngIf",e.form.controls.password.hasError("required")),n.zb(2),n.fc("disabled",e.form.invalid))},directives:[c.a,c.c,s.c,u.a,u.c,u.b,g.o,g.j,g.e,O.c,O.f,b.a,g.a,k.a,g.i,g.c,g.m,x.j,h.b,h.a,O.b],pipes:[b.d],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1}.central-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center}a.restore-password[_ngcontent-%COMP%]{color:grey;font-weight:400;font-size:16px;text-decoration:underline}.top-margin[_ngcontent-%COMP%]{margin-top:36px}"],changeDetection:0}),t})(),q=(()=>{class t{constructor(t,e){this._auth=t,this._router=e}canActivate(t,e){return this._auth.isLoggedIn$.pipe(Object(v.a)(t=>t||this._router.parseUrl("/")))}}return t.\u0275fac=function(e){return new(e||t)(n.Ub(w.a),n.Ub(s.a))},t.\u0275prov=n.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const C=[{path:"",component:i,children:[{path:"",component:Q,canActivate:[(()=>{class t{constructor(t,e){this._auth=t,this._router=e}canActivate(t,e){return this._auth.isLoggedIn$.pipe(Object(v.a)(t=>!t||this._router.parseUrl("in-out")))}}return t.\u0275fac=function(e){return new(e||t)(n.Ub(w.a),n.Ub(s.a))},t.\u0275prov=n.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]},{path:"in-out",loadChildren:()=>r.e(7).then(r.bind(null,"J6bi")).then(t=>t.InOutModule),canActivate:[q]},{path:"**",component:d}]}];let I=(()=>{class t{}return t.\u0275mod=n.Jb({type:t}),t.\u0275inj=n.Ib({factory:function(e){return new(e||t)},imports:[[s.d.forRoot(C)],s.d]}),t})(),z=(()=>{class t{constructor(t){this.title="check-in-out-app",t.addLangs(["en","de"]),t.setDefaultLang("en"),t.use("de")}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(b.e))},t.\u0275cmp=n.Fb({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&n.Mb(0,"router-outlet")},directives:[s.e],encapsulation:2,changeDetection:0}),t})();var U=r("R1ws"),M=r("SX+u"),N=r("y9W9"),A=r("PCNd"),F=r("TAFP"),D=r("mqiu"),$=r("dNgK");function E(t){return new D.a(t,o.a.production?"./assets/i18n/":"/assets/i18n/")}let X=(()=>{class t{}return t.\u0275mod=n.Jb({type:t,bootstrap:[z]}),t.\u0275inj=n.Ib({factory:function(e){return new(e||t)},providers:[{provide:w.b,useExisting:M.a},{useClass:N.a,provide:n.m},{useClass:F.a,provide:y.a,multi:!0}],imports:[[a.a,I,U.b,A.a,$.b,b.c.forRoot({loader:{provide:b.b,useFactory:E,deps:[y.b]}})]]}),t})();o.a.production&&Object(n.S)(),a.c().bootstrapModule(X).catch(t=>console.error(t))},zn8P:function(t,e){function r(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}r.keys=function(){return[]},r.resolve=r,t.exports=r,r.id="zn8P"}},[[0,0,6]]]);